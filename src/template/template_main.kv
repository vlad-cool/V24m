#:kivy 2.1.0

Carousel:
    loop: True

    weapon: 0
    weapon_connection_type: 0

    score_l_l: "0"
    score_l_r: " "
    score_r_l: " "
    score_r_r: "0"

    timer_0: "-"
    timer_1: ":"
    timer_2: "-"
    timer_3: "-"

    timer_text: ""

    timer_running: 0

    period: 1
    priority: 0
    warning_l: 0
    warning_r: 0

    passive_time: 0
    passive_size: 0
    passive_coun: "60"

    passive_1_state: "normal"
    passive_2_state: "normal"
    passive_3_state: "normal"
    passive_4_state: "normal"

    flash_timer: 0
    current_time: 0

    epee5: 0

    time_updated: True

    color_passive: [0, 0, 0, 1]
    color_timer: app.color_timer_orange
    color_invis: [0, 0, 0, 0]

    video_playing: False
    video_path: ""
    video_id: -1
    max_video_id: -1
    min_video_id: -1

    on_index: app.load_video_list()

    recording_enabled: False
    recording: False

    wired_ip: "No connection"
    wireless_ip: "No connection"

    auto_score_status: "Auto score\noff"
    auto_timer_status: "Auto timer\noff"

    FloatLayout:
        BoxLayout:
            id: weapon_selector
            orientation: "horizontal"
            size: {{ data["weapon_selector"]["width"] }}, {{ data["weapon_selector"]["height"] }}
            size_hint: None, None
            pos: {{ data["weapon_selector"]["x"] }}, {{ data["weapon_selector"]["y"] }}

            ToggleButton:
                id: weapon_2
                text: "fleuret"
                state: "down" if root.weapon == 2 else "normal"
                font_size: {{ data["weapon_selector"]["font_size"] }}
                font_name: "agencyb"
                group: "weapon"
                color: app.color_weapon_dis if root.weapon != 2 else app.color_weapon_ena
                background_color: root.color_invis
                on_press: app.set_weapon(2)

            ToggleButton:
                id: weapon_0
                markup: True
                text: "epee [color=4c4c4c]5[/color]" if root.epee5 == 0 else "epee 5"
                state: "down" if root.weapon == 3 else "normal"
                font_size: {{ data["weapon_selector"]["font_size"] }}
                font_name: "agencyb"
                group: "weapon"
                color: app.color_weapon_dis if root.weapon != 3 else app.color_weapon_ena
                background_color: root.color_invis
                on_press: app.set_weapon(0)

            ToggleButton:
                id: weapon_1
                text: "sabre"
                state: "down" if root.weapon == 1 else "normal"
                font_size: {{ data["weapon_selector"]["font_size"] }}
                font_name: "agencyb"
                group: "weapon"
                color: app.color_weapon_dis if root.weapon != 1 else app.color_weapon_ena
                background_color: root.color_invis
                on_press: app.set_weapon(1)

        Carousel:
            id: left_score_carousel
            direction: "top"
            loop: True
            size: {{ data["score"]["width"] * 2 }}, {{ data["score"]["height"] }}
            size_hint: None, None
            pos: {{ data["score"]["delta_x"] }}, {{ data["score"]["y"] }}
            min_move: 0.05

            old_index: 0
            on_index: app.carousel_handler(0, self.old_index, self.index, [3, 2]); self.old_index = self.index

            Button:
                on_press: app.send_handler(2)
                background_color: root.color_invis
                background_down: ""
                background_normal: ""

            Button:
                on_press: app.send_handler(2)
                background_color: root.color_invis
                background_down: ""
                background_normal: ""

            Button:
                on_press: app.send_handler(2)
                background_color: root.color_invis
                background_down: ""
                background_normal: ""

        Label:
            id: score_l_l
            text: root.score_l_l
            font_size: {{ data["score"]["font_size"] }}
            font_name: "agencyb"
            size: {{ data["score"]["width"] }}, {{ data["score"]["height"] }}
            size_hint: None, None
            pos: {{ data["score"]["delta_x"] }}, {{ data["score"]["y"] }}
            color: app.color_left_score

        Label:
            id: score_l_r
            text: root.score_l_r
            font_size: {{ data["score"]["font_size"] }}
            font_name: "agencyb"
            size: {{ data["score"]["width"] }}, {{ data["score"]["height"] }}
            size_hint: None, None
            pos: {{ data["score"]["delta_x"] + data["score"]["width"] }}, {{ data["score"]["y"] }}
            color: app.color_left_score

        Carousel:
            id: right_score_carousel
            direction: "top"
            loop: True
            size: {{ data["score"]["width"] * 2 }}, {{ data["score"]["height"] }}
            size_hint: None, None
            pos: {{ data["width"] - data["score"]["delta_x"] - data["score"]["width"] * 2 }}, {{ data["score"]["y"] }}
            min_move: 0.05

            old_index: 0
            on_index: app.carousel_handler(0, self.old_index, self.index, [15, 9]); self.old_index = self.index

            Button:
                on_press: app.send_handler(9)
                background_color: root.color_invis
                background_down: ""
                background_normal: ""

            Button:
                on_press: app.send_handler(9)
                background_color: root.color_invis
                background_down: ""
                background_normal: ""

            Button:
                on_press: app.send_handler(9)
                background_color: root.color_invis
                background_down: ""
                background_normal: ""

        Label:
            id: score_r_l
            text: root.score_r_l
            font_size: {{ data["score"]["font_size"] }}
            font_name: "agencyb"
            size: {{ data["score"]["width"] }}, {{ data["score"]["height"] }}
            size_hint: None, None
            pos: {{ data["width"] - data["score"]["delta_x"] - data["score"]["width"] * 2 }}, {{ data["score"]["y"] }}
            color: app.color_right_score

        Label:
            id: score_r_r
            text: root.score_r_r
            font_size: {{ data["score"]["font_size"] }}
            font_name: "agencyb"
            size: {{ data["score"]["width"] }}, {{ data["score"]["height"] }}
            size_hint: None, None
            pos: {{ data["width"] - data["score"]["delta_x"] - data["score"]["width"] }}, {{ data["score"]["y"] }}
            color: app.color_right_score

        Carousel:
            id: timer_carousel
            direction: "top"
            loop: True
            size: {{ data["timer"]["width"] }}, {{ data["timer"]["height"] }}
            size_hint: None, None
            pos: {{ data["timer"]["x"] }}, {{ data["timer"]["y"] }}
            min_move: 0.05

            old_index: 0
            on_index: app.carousel_handler(0, self.old_index, self.index, [6, 14]); self.old_index = self.index

            Button:
                on_press: app.send_handler(13)
                background_color: root.color_invis
                background_down: ""
                background_normal: ""

            Button:
                on_press: app.send_handler(13)
                background_color: root.color_invis
                background_down: ""
                background_normal: ""

            Button:
                on_press: app.send_handler(13)
                background_color: root.color_invis
                background_down: ""
                background_normal: ""

        Label:
            id: timer_min
            text: root.timer_0
            font_size: {{ data["timer"]["time_font_size"] }}
            font_name: "agencyb"
            size: {{ data["timer"]["number_width"] }}, {{ data["timer"]["height"] }}
            size_hint: None, None
            pos: {{ data["timer"]["x"] }}, {{ data["timer"]["y"] }}
            color: root.color_timer

        Label:
            id: timer_dot
            text: root.timer_1 if root.timer_running == 0 or root.current_time - root.flash_timer < 0.5 else " "
            font_size: {{ data["timer"]["time_font_size"] }}
            font_name: "agencyb"
            size: {{ data["timer"]["dot_width"] }}, {{ data["timer"]["height"] }}
            size_hint: None, None
            pos: {{ data["timer"]["x"] + data["timer"]["number_width"] }}, {{ data["timer"]["y"] }}
            color: root.color_timer

        Label:
            id: timer_dec
            text: root.timer_2
            font_size: {{ data["timer"]["time_font_size"] }}
            font_name: "agencyb"
            size: {{ data["timer"]["number_width"] }}, {{ data["timer"]["height"] }}
            size_hint: None, None
            pos: {{ data["timer"]["x"] + data["timer"]["number_width"] + data["timer"]["dot_width"] }}, {{ data["timer"]["y"] }}
            color: root.color_timer

        Label:
            id: timer_sec
            text: root.timer_3
            font_size: {{ data["timer"]["time_font_size"] }}
            font_name: "agencyb"
            size: {{ data["timer"]["number_width"] }}, {{ data["timer"]["height"] }}
            size_hint: None, None
            pos: {{ data["timer"]["x"] + data["timer"]["number_width"] * 2 + data["timer"]["dot_width"] }}, {{ data["timer"]["y"] }}
            color: root.color_timer

        Label:
            id: timer_text
            text: root.timer_text
            font_size: {{ data["timer"]["text_font_size"] }}
            font_name: "agencyb"
            size: {{ data["timer"]["width"] }}, {{ data["timer"]["height"] }}
            size_hint: None, None
            pos: {{ data["timer"]["x"] }}, {{ data["timer"]["y"] }}
            color: root.color_timer

        Label:
            id: passive
            size: root.passive_size * {{ data["passive"]["width"] * 2 }}, 0 if root.passive_time > 50 and root.passive_time < 60 and root.current_time - root.flash_timer > 0.5 and root.timer_running == 1 else {{ -data["passive"]["height"] }}
            size_hint: None, None
            pos: {{ data["passive"]["x"] }} - root.passive_size * {{ data["passive"]["width"] }}, {{ data["passive"]["y"] }}

            canvas:
                Color:
                    rgba: root.color_passive
                Rectangle:
                    pos: self.pos
                    size: self.size

        Button:
            id: period
            text: str(root.period)
            font_size: {{ data["period"]["font_size"] }}
            font_name: "agencyb"
            size: {{ data["period"]["width"] }}, {{ data["period"]["height"] }}
            size_hint: None, None
            pos: {{ data["period"]["x"] }}, {{ data["period"]["y"] }}
            color: app.color_period

            on_press: app.send_handler(8)

            background_color: root.color_invis
            background_down: ""
            background_normal: ""

        Label:
            id: passive_counter_2_1
            text: root.passive_coun[0] if root.time_updated or root.timer_running == 0 else self.text
            font_size: {{ data["passive_counter"]["font_size"] }}
            font_name: "agencyb"
            size: {{ data["passive_counter"]["width"] }}, {{ data["passive_counter"]["height"] }}
            size_hint: None, None
            pos: {{ data["passive_counter"]["x"] }}, {{ data["passive_counter"]["y"] }}
            color: app.color_passive_white if root.weapon != 1 else app.color_passive_inact

            background_color: root.color_invis
            background_down: ""
            background_normal: ""

        Label:
            id: passive_counter_2_2
            text: root.passive_coun[1] if root.time_updated or root.timer_running == 0 else self.text
            font_size: {{ data["passive_counter"]["font_size"] }}
            font_name: "agencyb"
            size: {{ data["passive_counter"]["width"] }}, {{ data["passive_counter"]["height"] }}
            size_hint: None, None
            pos: {{ data["passive_counter"]["x"] + data["passive_counter"]["width"] }}, {{ data["passive_counter"]["y"] }}
            color: app.color_passive_white if root.weapon != 1 else app.color_passive_inact

            background_color: root.color_invis
            background_down: ""
            background_normal: ""

        Label:
            id: warning_top_l
            text: "penalty"
            font_size: {{ data["warning_card"]["font_size"] }}
            font_name: "agencyb"
            size: {{ data["warning_card"]["width"] }}, {{ data["warning_card"]["height"] }}
            size_hint: None, None
            pos: {{ data["warning_card"]["x"] }}, {{ data["warning_card"]["y"] + data["warning_card"]["height"] + data["warning_card"]["gap"] }}

            color: app.color_warn_text_ena if root.warning_l >= 2 else app.color_warn_text_dis
            
            background_color: root.color_invis
            background_down: ""
            background_normal: ""
            background_disabled_down: ""
            background_disabled_normal: ""

            canvas.before:
                Color:
                    rgba: app.color_warn_red_dis if root.warning_l < 2 else app.color_warn_red_ena
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [{{ data["card"]["radius"] }},]

        Label:
            id: warning_bot_l
            text: "caution"
            font_size: {{ data["warning_card"]["font_size"] }}
            font_name: "agencyb"
            size: {{ data["warning_card"]["width"] }}, {{ data["warning_card"]["height"] }}
            size_hint: None, None
            pos: {{ data["warning_card"]["x"] }}, {{ data["warning_card"]["y"] }}

            color: app.color_warn_text_ena if root.warning_l >= 1 else app.color_warn_text_dis
            
            background_color: root.color_invis
            background_down: ""
            background_normal: ""
            background_disabled_down: ""
            background_disabled_normal: ""

            canvas.before:
                Color:
                    rgba: app.color_warn_yel_dis if root.warning_l < 1 else app.color_warn_yel_ena
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [{{ data["card"]["radius"] }},]

        Button:
            id: left_warning_button
            size: {{ data["warning_card"]["width"] }}, {{ data["warning_card"]["height"] * 2 + data["warning_card"]["gap"] }}
            size_hint: None, None
            pos: {{ data["warning_card"]["x"] }}, {{ data["warning_card"]["y"] }}

            on_press: app.send_handler(4)

            background_color: root.color_invis
            background_down: ""
            background_normal: ""

        Label:
            id: warning_top_r
            text: "penalty"
            font_size: {{ data["warning_card"]["font_size"] }}
            font_name: "agencyb"
            size: {{ data["warning_card"]["width"] }}, {{ data["warning_card"]["height"] }}
            size_hint: None, None
            pos: {{ data["width"] - data["warning_card"]["width"] - data["warning_card"]["x"] }}, {{ data["warning_card"]["y"] + data["warning_card"]["height"] + data["warning_card"]["gap"] }}

            color: app.color_warn_text_ena if root.warning_r >= 2 else app.color_warn_text_dis

            background_color: root.color_invis
            background_down: ""
            background_normal: ""
            background_disabled_down: ""
            background_disabled_normal: ""

            canvas.before:
                Color:
                    rgba: app.color_warn_red_dis if root.warning_r < 2 else app.color_warn_red_ena
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [{{ data["card"]["radius"] }},]

        Label:
            id: warning_bot_r
            text: "caution"
            font_size: {{ data["warning_card"]["font_size"] }}
            font_name: "agencyb"
            size: {{ data["warning_card"]["width"] }}, {{ data["warning_card"]["height"] }}
            size_hint: None, None
            pos: {{ data["width"] - data["warning_card"]["width"] - data["warning_card"]["x"] }}, {{ data["warning_card"]["y"] }}

            color: app.color_warn_text_ena if root.warning_r >= 1 else app.color_warn_text_dis
            
            background_color: root.color_invis
            background_down: ""
            background_normal: ""
            background_disabled_down: ""
            background_disabled_normal: ""

            canvas.before:
                Color:
                    rgba: app.color_warn_yel_dis if root.warning_r < 1 else app.color_warn_yel_ena
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [{{ data["card"]["radius"] }},]

        Button:
            id: left_warning_button
            size: {{ data["warning_card"]["width"] }}, {{ data["warning_card"]["height"] * 2 + data["warning_card"]["gap"] }}
            size_hint: None, None
            pos: {{ data["width"] - data["warning_card"]["width"] - data["warning_card"]["x"] }}, {{ data["warning_card"]["y"] }}

            on_press: app.send_handler(11)

            background_color: root.color_invis
            background_down: ""
            background_normal: ""

        Label:
            id: priority_l_cap
            text: "P"
            font_size: {{ data["priority"]["cap_font_size"] }}
            font_name: "agencyb"
            size: {{ data["priority"]["cap_width"] }}, {{ data["priority"]["cap_height"] }}
            size_hint: None, None
            pos: {{ data["priority"]["cap_l_x"] }}, {{ data["priority"]["cap_y"] }}
            color: app.color_left_p_ena if root.priority == -1 else app.color_left_p_dis

        Label:
            id: priority_l_word
            text: "priority"
            font_size: {{ data["priority"]["word_font_size"] }}
            font_name: "agencyb"
            size: {{ data["priority"]["word_width"] }}, {{ data["priority"]["word_height"] }}
            size_hint: None, None
            pos: {{ data["priority"]["word_l_x"] }}, {{ data["priority"]["word_y"] }}
            color: app.color_warn_text_ena if root.priority == -1 else app.color_warn_text_dis
        
        Button:
            text: root.auto_score_status
            font_size: {{ data["auto_score_status"]["font_size"] }}
            font_name: "agencyb"
            size: {{ data["auto_score_status"]["width"] }}, {{ data["auto_score_status"]["height"] }}
            size_hint: None, None
            pos: {{ data["auto_score_status"]["x"] }}, {{ data["auto_score_status"]["y"] }}
            color: app.color_weapon_ena if root.auto_score_status == "Auto score\non" else app.color_weapon_dis
            halign: "center"
            background_color: root.color_invis
            on_press: app.send_handler(16); app.on_off_watching = 16

        Label:
            id: priority_r_cap
            text: "P"
            font_size: {{ data["priority"]["cap_font_size"] }}
            font_name: "agencyb"
            size: {{ data["priority"]["cap_width"] }}, {{ data["priority"]["cap_height"] }}
            size_hint: None, None
            pos: {{ data["priority"]["cap_r_x"] }}, {{ data["priority"]["cap_y"] }}
            color: app.color_right_p_ena if root.priority == +1 else app.color_right_p_dis

        Label:
            id: priority_r_word
            text: "priority"
            font_size: {{ data["priority"]["word_font_size"] }}
            font_name: "agencyb"
            size: {{ data["priority"]["word_width"] }}, {{ data["priority"]["word_height"] }}
            size_hint: None, None
            pos: {{ data["priority"]["word_r_x"] }}, {{ data["priority"]["word_y"] }}
            color: app.color_warn_text_ena if root.priority == +1 else app.color_warn_text_dis
        
        Button:
            text: root.auto_timer_status
            font_size: {{ data["auto_timer_status"]["font_size"] }}
            font_name: "agencyb"
            size: {{ data["auto_timer_status"]["width"] }}, {{ data["auto_timer_status"]["height"] }}
            size_hint: None, None
            pos: {{ data["auto_timer_status"]["x"] }}, {{ data["auto_timer_status"]["y"] }}
            color: app.color_weapon_ena if root.auto_timer_status == "Auto timer\non" else app.color_weapon_dis
            halign: "center"
            background_color: root.color_invis
            on_press: app.send_handler(1); app.on_off_watching = 1

        ToggleButton:
            id: passive_1
            text: "Pcard"
            font_size: {{ data["passive_card"]["font_size"] }}
            font_name: "agencyb"
            state: root.passive_1_state
            color: app.color_warn_text_ena if self.state == "down" else app.color_warn_text_dis
            size: {{ data["passive_card"]["width"] }}, {{ data["passive_card"]["height"] }}
            size_hint: None, None
            pos: {{ data["passive_card"]["x"] }}, {{ data["passive_card"]["y"] }}
            on_press: app.passive_stop_card(self.state, 1)
            disabled: root.timer_running == 1

            background_color: root.color_invis
            background_down: ""
            background_normal: ""
            background_disabled_down: ""
            background_disabled_normal: ""

            canvas.before:
                Color:
                    rgba: app.color_warn_red_dis if self.state == "normal" else app.color_warn_red_ena
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [{{ data["card"]["radius"] }},]

        ToggleButton:
            id: passive_2
            text: "Pcard"
            font_size: {{ data["passive_card"]["font_size"] }}
            font_name: "agencyb"
            state: root.passive_2_state
            color: app.color_warn_text_ena if self.state == "down" else app.color_warn_text_dis
            size: {{ data["passive_card"]["width"] }}, {{ data["passive_card"]["height"] }}
            size_hint: None, None
            pos: {{ data["passive_card"]["x"] }}, {{ data["passive_card"]["y"] + data["passive_card"]["height"] + data["passive_card"]["gap"] }}
            on_press: app.passive_stop_card(self.state, 2)
            disabled: root.timer_running == 1

            background_color: root.color_invis
            background_down: ""
            background_normal: ""
            background_disabled_down: ""
            background_disabled_normal: ""

            canvas.before:
                Color:
                    rgba: app.color_warn_yel_dis if self.state == "normal" else app.color_warn_yel_ena
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [{{ data["card"]["radius"] }},]

        ToggleButton:
            id: passive_3
            text: "Pcard"
            font_size: {{ data["passive_card"]["font_size"] }}
            font_name: "agencyb"
            state: root.passive_3_state
            color: app.color_warn_text_ena if self.state == "down" else app.color_warn_text_dis
            size: {{ data["passive_card"]["width"] }}, {{ data["passive_card"]["height"] }}
            size_hint: None, None
            pos: {{ data["width"] - data["passive_card"]["width"] - data["passive_card"]["x"] }}, {{ data["passive_card"]["y"] + data["passive_card"]["height"] + data["passive_card"]["gap"] }}
            on_press: app.passive_stop_card(self.state, 3)
            disabled: root.timer_running == 1

            background_color: root.color_invis
            background_down: ""
            background_normal: ""
            background_disabled_down: ""
            background_disabled_normal: ""

            canvas.before:
                Color:
                    rgba: app.color_warn_red_dis if self.state == "normal" else app.color_warn_red_ena
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [{{ data["card"]["radius"] }},]

        ToggleButton:
            id: passive_4
            text: "Pcard"
            font_size: {{ data["passive_card"]["font_size"] }}
            font_name: "agencyb"
            state: root.passive_4_state
            color: app.color_warn_text_ena if self.state == "down" else app.color_warn_text_dis
            size: {{ data["passive_card"]["width"] }}, {{ data["passive_card"]["height"] }}
            size_hint: None, None
            pos: {{ data["width"] - data["passive_card"]["width"] - data["passive_card"]["x"] }}, {{ data["passive_card"]["y"] }}
            on_press: app.passive_stop_card(self.state, 4)
            disabled: root.timer_running == 1

            background_color: root.color_invis
            background_down: ""
            background_normal: ""
            background_disabled_down: ""
            background_disabled_normal: ""

            canvas.before:
                Color:
                    rgba: app.color_warn_yel_dis if self.state == "normal" else app.color_warn_yel_ena
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [{{ data["card"]["radius"] }},]

        Label:
            id: recording_indicator
            size: {{ data["recording_indicator"]["size"] }}, {{ data["recording_indicator"]["size"] }}
            size_hint: None, None
            pos: {{ data["recording_indicator"]["x"] }}, {{ data["recording_indicator"]["y"] }}

            canvas:
                Color:
                    rgba: app.color_rec if root.recording else root.color_invis
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: self.size

        Button:
            text: "recording on" if root.recording_enabled else "recording off"
            size: {{ data["recording_status"]["width"] }}, {{ data["recording_status"]["height"] }}
            size_hint: None, None
            pos: {{ data["recording_status"]["x"] }}, {{ data["recording_status"]["y"] }}
            font_size: {{ data["recording_status"]["font_size"] }}
            font_name: "agencyb"
            color: app.color_weapon_ena if root.recording_enabled else app.color_weapon_dis
            background_color: root.color_invis
            on_press: app.toggle_recording()
            halign: "right"

    FloatLayout:
        FloatLayout:
            Video:
                id: video_player
                size: {{ data["video_player"]["width"] }}, {{ data["video_player"]["height"] }}
                size_hint: None, None
                pos: {{ data["video_player"]["x"] }}, {{ data["video_player"]["y"] }}
                state: "play" if root.video_playing else "pause"
                source: root.video_path + "/" + str(root.video_id) + ".mp4" if root.video_id >= root.min_video_id and root.video_id <= root.max_video_id else ""
                options: dict({"avdict": {"codec:v": "h264_vdpau"}})

            Button:
                size: {{ data["video_player"]["width"] }}, {{ data["video_player"]["height"] }}
                size_hint: None, None
                pos: {{ data["video_player"]["x"] }}, {{ data["video_player"]["y"] }}
                on_press: root.video_playing = not root.video_playing
                background_color: root.color_invis

            BoxLayout:
                id: player_controls
                orientation: "horizontal"
                size: {{ data["player_controls"]["width"] }}, {{ data["player_controls"]["height"] }}
                size_hint: None, None
                pos: {{ data["player_controls"]["x"] }}, {{ data["player_controls"]["y"] }}

                Label:
                    text: str(root.video_id - root.min_video_id + 1) if root.video_id != -1 else "--"
                    font_size: {{ data["player_controls"]["font_size"] }}
                    font_name: "agencyb"

                    size: self.parent.height, self.parent.width - self.parent.height * 6

                Button:
                    id: previous_video
                    size: self.parent.height, self.parent.height
                    size_hint: None, None
                    background_normal: "assets/previous_video_light.png"
                    background_down: "assets/previous_video_dark.png"
                    on_press: app.previous_video()

                Button:
                    id: back_video
                    size: self.parent.height, self.parent.height
                    size_hint: None, None
                    background_normal: "assets/rewind_backward_light.png"
                    background_down: "assets/rewind_backward_dark.png"
                    on_press: app.rewind_video(-1)

                Button:
                    id: play_video
                    size: self.parent.height, self.parent.height
                    size_hint: None, None
                    background_normal: "assets/pause_light.png" if root.video_playing == True else "assets/play_light.png"
                    background_down: "assets/pause_dark.png" if root.video_playing == True else "assets/play_dark.png"
                    on_press: app.play_pause_video()

                Button:
                    id: stop_video
                    size: self.parent.height, self.parent.height
                    size_hint: None, None
                    background_normal: "assets/stop_light.png"
                    background_down: "assets/stop_dark.png"
                    on_press: root.video_id = -1; root.video_playing = False; root.ids.video_player.source = ""

                Button:
                    id: forward_video
                    size: self.parent.height, self.parent.height
                    size_hint: None, None
                    background_normal: "assets/rewind_forward_light.png"
                    background_down: "assets/rewind_forward_dark.png"
                    on_press: app.rewind_video(1)

                Button:
                    id: next_video
                    size: self.parent.height, self.parent.height
                    size_hint: None, None
                    background_normal: "assets/next_video_light.png"
                    background_down: "assets/next_video_dark.png"
                    on_press: app.next_video()

            BoxLayout:
                id: video_playback
                orientation: "horizontal"
                size: {{ data["video_playback"]["width"] }}, {{ data["video_playback"]["height"] }}
                size_hint: None, None
                pos: {{ data["video_playback"]["x"] }}, {{ data["video_playback"]["y"] }}

                Label:
                    text: "-8 sec"
                    font_size: {{ data["video_playback"]["font_size"] }}
                    font_name: "agencyb"

                    canvas.before:
                        Color:
                            rgba: [0.8, 0.8, 0.8, 1]
                        Line:
                            width: 4
                            rectangle: self.x, self.y, self.width, self.height
                        Color:
                            rgba: [0.2, 0.2, 0.2, 1]
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    text: "-7 sec"
                    font_size: {{ data["video_playback"]["font_size"] }}
                    font_name: "agencyb"

                    canvas.before:
                        Color:
                            rgba: [0.8, 0.8, 0.8, 1]
                        Line:
                            width: 4
                            rectangle: self.x, self.y, self.width, self.height
                        Color:
                            rgba: [0.2, 0.2, 0.2, 1]
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    text: "-6 sec"
                    font_size: {{ data["video_playback"]["font_size"] }}
                    font_name: "agencyb"

                    canvas.before:
                        Color:
                            rgba: [0.8, 0.8, 0.8, 1]
                        Line:
                            width: 4
                            rectangle: self.x, self.y, self.width, self.height
                        Color:
                            rgba: [0.2, 0.2, 0.2, 1]
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    text: "-5 sec"
                    font_size: {{ data["video_playback"]["font_size"] }}
                    font_name: "agencyb"

                    canvas.before:
                        Color:
                            rgba: [0.8, 0.8, 0.8, 1]
                        Line:
                            width: 4
                            rectangle: self.x, self.y, self.width, self.height
                        Color:
                            rgba: [0.2, 0.2, 0.2, 1]
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    text: "-4 sec"
                    font_size: {{ data["video_playback"]["font_size"] }}
                    font_name: "agencyb"

                    canvas.before:
                        Color:
                            rgba: [0.8, 0.8, 0.8, 1]
                        Line:
                            width: 4
                            rectangle: self.x, self.y, self.width, self.height
                        Color:
                            rgba: [0.2, 0.2, 0.2, 1]
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    text: "-3 sec"
                    font_size: {{ data["video_playback"]["font_size"] }}
                    font_name: "agencyb"

                    canvas.before:
                        Color:
                            rgba: [0.8, 0.8, 0.8, 1]
                        Line:
                            width: 4
                            rectangle: self.x, self.y, self.width, self.height
                        Color:
                            rgba: [0.2, 0.2, 0.2, 1]
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    text: "-2 sec"
                    font_size: {{ data["video_playback"]["font_size"] }}
                    font_name: "agencyb"

                    canvas.before:
                        Color:
                            rgba: [0.8, 0.8, 0.8, 1]
                        Line:
                            width: 4
                            rectangle: self.x, self.y, self.width, self.height
                        Color:
                            rgba: [0.2, 0.2, 0.2, 1]
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    text: "-1 sec"
                    font_size: {{ data["video_playback"]["font_size"] }}
                    font_name: "agencyb"

                    canvas.before:
                        Color:
                            rgba: [0.8, 0.8, 0.8, 1]
                        Line:
                            width: 4
                            rectangle: self.x, self.y, self.width, self.height
                        Color:
                            rgba: [0.2, 0.2, 0.2, 1]
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    text: "1 sec"
                    font_size: {{ data["video_playback"]["font_size"] }}
                    font_name: "agencyb"

                    canvas.before:
                        Color:
                            rgba: [0.8, 0.8, 0.8, 1]
                        Line:
                            width: 4
                            rectangle: self.x, self.y, self.width, self.height
                        Color:
                            rgba: [0.2, 0.2, 0.2, 1]
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    text: "2 sec"
                    font_size: {{ data["video_playback"]["font_size"] }}
                    font_name: "agencyb"

                    canvas.before:
                        Color:
                            rgba: [0.8, 0.8, 0.8, 1]
                        Line:
                            width: 4
                            rectangle: self.x, self.y, self.width, self.height
                        Color:
                            rgba: [0.2, 0.2, 0.2, 1]
                        Rectangle:
                            pos: self.pos
                            size: self.size

            Label:
                size: ({{ data["video_pointer"]["width"] }}, {{ data["video_pointer"]["height"] }}) if root.video_id >= 0 and root.ids.video_player.loaded else (0, 0)
                pos: root.ids.video_playback.pos[0] - self.size[0] / 2 + root.ids.video_playback.size[0] * max(0, 10 - root.ids.video_player.duration + root.ids.video_player.position) / 10, root.ids.video_playback.pos[1]
                size_hint: None, None
            
                canvas.before:
                    Color:
                        rgba: [0.8, 0.8, 0.8, 1]
                    Line:
                        width: 4
                        rectangle: self.x, self.y, self.width, self.height
                    Color:
                        rgba: [1, 0.2, 0.2, 1]
                    Rectangle:
                        pos: self.pos
                        size: self.size

        ScatterLayout:
            id: score_layout

            # # Label:
            # #     canvas.before:
            # #         Color:
            # #             rgba: [0.8, 0.8, 0.8, 1]
            # #         Line:
            # #             width: 4
            # #             rectangle: self.x, self.y, self.width, self.height
            # #         Color:
            # #             rgba: [0.2, 0.2, 0.2, 1]
            # #         Rectangle:
            # #             pos: self.pos
            # #             size: self.size

            # BoxLayout:
            #     id: weapon_selector
            #     orientation: "horizontal"
            #     size: 760, 100
            #     size_hint: None, None
            #     pos: 580, 0

            #     ToggleButton:
            #         id: weapon_2
            #         text: "fleuret"
            #         state: "down" if root.weapon == 2 else "normal"
            #         font_size: 80
            #         font_name: "agencyb"
            #         group: "weapon"
            #         color: app.color_weapon_dis if root.weapon != 2 else app.color_weapon_ena
            #         background_color: root.color_invis
            #         on_press: app.set_weapon(2)

            #     ToggleButton:
            #         id: weapon_0
            #         markup: True
            #         text: "epee [color=4c4c4c]5[/color]" if root.epee5 == 0 else "epee 5"
            #         state: "down" if root.weapon == 3 else "normal"
            #         font_size: 80
            #         font_name: "agencyb"
            #         group: "weapon"
            #         color: app.color_weapon_dis if root.weapon != 3 else app.color_weapon_ena
            #         background_color: root.color_invis
            #         on_press: app.set_weapon(0)

            #     ToggleButton:
            #         id: weapon_1
            #         text: "sabre"
            #         state: "down" if root.weapon == 1 else "normal"
            #         font_size: 80
            #         font_name: "agencyb"
            #         group: "weapon"
            #         color: app.color_weapon_dis if root.weapon != 1 else app.color_weapon_ena
            #         background_color: root.color_invis
            #         on_press: app.set_weapon(1)

            # Carousel:
            #     id: left_score_carousel
            #     direction: "top"
            #     loop: True
            #     size: 420, 480
            #     size_hint: None, None
            #     pos: 20, 0
            #     min_move: 0.05

            #     old_index: 0
            #     on_index: app.carousel_handler(0, self.old_index, self.index, [3, 2]); self.old_index = self.index

            #     Button:
            #         on_press: app.send_handler(2)
            #         background_color: root.color_invis
            #         background_down: ""
            #         background_normal: ""

            #     Button:
            #         on_press: app.send_handler(2)
            #         background_color: root.color_invis
            #         background_down: ""
            #         background_normal: ""

            #     Button:
            #         on_press: app.send_handler(2)
            #         background_color: root.color_invis
            #         background_down: ""
            #         background_normal: ""

            # Label:
            #     id: score_l_l
            #     text: root.score_l_l
            #     font_size: 500
            #     font_name: "agencyb"
            #     size: 200, 460
            #     size_hint: None, None
            #     pos: 20, 0
            #     color: app.color_left_score

            # Label:
            #     id: score_l_r
            #     text: root.score_l_r
            #     font_size: 500
            #     font_name: "agencyb"
            #     size: 200, 460
            #     size_hint: None, None
            #     pos: 220, 0
            #     color: app.color_left_score

            # Carousel:
            #     id: right_score_carousel
            #     direction: "top"
            #     loop: True
            #     size: 420, 480
            #     size_hint: None, None
            #     pos: 1480, 0
            #     min_move: 0.05

            #     old_index: 0
            #     on_index: app.carousel_handler(0, self.old_index, self.index, [15, 9]); self.old_index = self.index

            #     Button:
            #         on_press: app.send_handler(9)
            #         background_color: root.color_invis
            #         background_down: ""
            #         background_normal: ""

            #     Button:
            #         on_press: app.send_handler(9)
            #         background_color: root.color_invis
            #         background_down: ""
            #         background_normal: ""

            #     Button:
            #         on_press: app.send_handler(9)
            #         background_color: root.color_invis
            #         background_down: ""
            #         background_normal: ""

            # Label:
            #     id: score_r_l
            #     text: root.score_r_l
            #     font_size: 500
            #     font_name: "agencyb"
            #     size: 200, 460
            #     size_hint: None, None
            #     pos: 1480, 0
            #     color: app.color_right_score

            # Label:
            #     id: score_r_r
            #     text: root.score_r_r
            #     font_size: 500
            #     font_name: "agencyb"
            #     size: 200, 460
            #     size_hint: None, None
            #     pos: 1700, 0
            #     color: app.color_right_score

            # Carousel:
            #     id: timer_carousel
            #     direction: "top"
            #     loop: True
            #     size: 550, 300
            #     size_hint: None, None
            #     pos: 530 + 200 - 30, 140
            #     min_move: 0.05

            #     old_index: 0
            #     on_index: app.carousel_handler(0, self.old_index, self.index, [6, 14]); self.old_index = self.index

            #     Button:
            #         on_press: app.send_handler(13)
            #         background_color: root.color_invis
            #         background_down: ""
            #         background_normal: ""

            #     Button:
            #         on_press: app.send_handler(13)
            #         background_color: root.color_invis
            #         background_down: ""
            #         background_normal: ""

            #     Button:
            #         on_press: app.send_handler(13)
            #         background_color: root.color_invis
            #         background_down: ""
            #         background_normal: ""

            # Label:
            #     id: timer_min
            #     text: root.timer_0
            #     font_size: 360
            #     font_name: "agencyb"
            #     size: 150, 300
            #     size_hint: None, None
            #     pos: 730 + 150 * 0 - 30, 140
            #     color: root.color_timer

            # Label:
            #     id: timer_dot
            #     text: root.timer_1 if root.timer_running == 0 or root.current_time - root.flash_timer < 0.5 else " "
            #     font_size: 360
            #     font_name: "agencyb"
            #     size: 150, 300
            #     size_hint: None, None
            #     pos: 730 + 150 * 1 - 40 - 10, 140
            #     color: root.color_timer

            # Label:
            #     id: timer_dec
            #     text: root.timer_2
            #     font_size: 360
            #     font_name: "agencyb"
            #     size: 150, 300
            #     size_hint: None, None
            #     pos: 730 + 150 * 2 - 80 + 10, 140
            #     color: root.color_timer

            # Label:
            #     id: timer_sec
            #     text: root.timer_3
            #     font_size: 360
            #     font_name: "agencyb"
            #     size: 150, 300
            #     size_hint: None, None
            #     pos: 730 + 150 * 3 - 80 + 30, 140
            #     color: root.color_timer

            # Label:
            #     id: timer_text
            #     text: root.timer_text
            #     font_size: 120
            #     font_name: "agencyb"
            #     size: 600, 300
            #     size_hint: None, None
            #     pos: 730, 140
            #     color: root.color_timer

            # Label:
            #     id: passive
            #     size: root.passive_size * 2, 0 if root.passive_time > 50 and root.passive_time < 60 and root.current_time - root.flash_timer > 0.5 and root.timer_running == 1 else -16
            #     size_hint: None, None
            #     pos: 960 - root.passive_size, 480

            #     canvas:
            #         Color:
            #             rgba: root.color_passive
            #         Rectangle:
            #             pos: self.pos
            #             size: self.size

            # Button:
            #     id: period
            #     text: str(root.period)
            #     font_size: 200
            #     font_name: "agencyb"
            #     size: 120, 200
            #     size_hint: None, None
            #     pos: 580, 100
            #     color: app.color_period

            #     on_press: app.send_handler(8)

            #     background_color: root.color_invis
            #     background_down: ""
            #     background_normal: ""

            # Label:
            #     id: passive_counter_2_1
            #     text: root.passive_coun[0] if root.time_updated or root.timer_running == 0 else self.text
            #     font_size: 100
            #     font_name: "agencyb"
            #     size: 60, 200
            #     size_hint: None, None
            #     pos: 585, 285
            #     color: app.color_passive_white if root.weapon != 1 else app.color_passive_inact

            #     background_color: root.color_invis
            #     background_down: ""
            #     background_normal: ""

            # Label:
            #     id: passive_counter_2_2
            #     text: root.passive_coun[1] if root.time_updated or root.timer_running == 0 else self.text
            #     font_size: 100
            #     font_name: "agencyb"
            #     size: 60, 200
            #     size_hint: None, None
            #     pos: 635, 285
            #     color: app.color_passive_white if root.weapon != 1 else app.color_passive_inact

            #     background_color: root.color_invis
            #     background_down: ""
            #     background_normal: ""

            # Label:
            #     id: warning_top_l
            #     text: "penalty"
            #     font_size: 30
            #     font_name: "agencyb"
            #     color: app.color_warn_text_ena if root.warning_l >= 2 else app.color_warn_text_dis
            #     size: 100, 40
            #     size_hint: None, None
            #     pos: 460, 250

            #     background_color: root.color_invis
            #     background_down: ""
            #     background_normal: ""
            #     background_disabled_down: ""
            #     background_disabled_normal: ""

            #     canvas.before:
            #         Color:
            #             rgba: app.color_warn_red_dis if root.warning_l < 2 else app.color_warn_red_ena
            #         RoundedRectangle:
            #             pos: self.pos
            #             size: self.size
            #             radius: [{{ data["card"]["radius"] }},]

            # Label:
            #     id: warning_bot_l
            #     text: "caution"
            #     font_size: 30
            #     font_name: "agencyb"
            #     color: app.color_warn_text_ena if root.warning_l >= 1 else app.color_warn_text_dis
            #     size: 100, 40
            #     size_hint: None, None
            #     pos: 460, 190

            #     background_color: root.color_invis
            #     background_down: ""
            #     background_normal: ""
            #     background_disabled_down: ""
            #     background_disabled_normal: ""

            #     canvas.before:
            #         Color:
            #             rgba: app.color_warn_yel_dis if root.warning_l < 1 else app.color_warn_yel_ena
            #         RoundedRectangle:
            #             pos: self.pos
            #             size: self.size
            #             radius: [{{ data["card"]["radius"] }},]

            # Button:
            #     id: left_warning_button
            #     size: 100, 120
            #     size_hint: None, None
            #     pos: 460, 190

            #     on_press: app.send_handler(4)

            #     background_color: root.color_invis
            #     background_down: ""
            #     background_normal: ""

            # Label:
            #     id: warning_top_r
            #     text: "penalty"
            #     font_size: 30
            #     font_name: "agencyb"
            #     color: app.color_warn_text_ena if root.warning_r >= 2 else app.color_warn_text_dis
            #     size: 100, 40
            #     size_hint: None, None
            #     pos: 1360, 250

            #     background_color: root.color_invis
            #     background_down: ""
            #     background_normal: ""
            #     background_disabled_down: ""
            #     background_disabled_normal: ""

            #     canvas.before:
            #         Color:
            #             rgba: app.color_warn_red_dis if root.warning_r < 2 else app.color_warn_red_ena
            #         RoundedRectangle:
            #             pos: self.pos
            #             size: self.size
            #             radius: [{{ data["card"]["radius"] }},]

            # Label:
            #     id: warning_bot_r
            #     text: "caution"
            #     font_size: 30
            #     font_name: "agencyb"
            #     color: app.color_warn_text_ena if root.warning_r >= 1 else app.color_warn_text_dis
            #     size: 100, 40
            #     size_hint: None, None
            #     pos: 1360, 190

            #     background_color: root.color_invis
            #     background_down: ""
            #     background_normal: ""
            #     background_disabled_down: ""
            #     background_disabled_normal: ""

            #     canvas.before:
            #         Color:
            #             rgba: app.color_warn_yel_dis if root.warning_r < 1 else app.color_warn_yel_ena
            #         RoundedRectangle:
            #             pos: self.pos
            #             size: self.size
            #             radius: [{{ data["card"]["radius"] }},]

            # Button:
            #     id: right_warning_button
            #     size: 100, 120
            #     size_hint: None, None
            #     pos: 1360, 190

            #     on_press: app.send_handler(11)

            #     background_color: root.color_invis
            #     background_down: ""
            #     background_normal: ""

            # Label:
            #     id: priority_l_cap
            #     text: "P"
            #     font_size: 120
            #     font_name: "agencyb"
            #     size: 100, 100
            #     size_hint: None, None
            #     pos: 460 - 27 - 8, 80
            #     color: app.color_left_p_ena if root.priority == -1 else app.color_left_p_dis

            # Label:
            #     id: priority_l_word
            #     text: "priority"
            #     font_size: 36
            #     font_name: "agencyb"
            #     size: 100, 100
            #     size_hint: None, None
            #     pos: 460 + 27 - 16, 80 - 27
            #     color: app.color_warn_text_ena if root.priority == -1 else app.color_warn_text_dis

            # Label:
            #     text: root.auto_score_status
            #     font_size: 32
            #     font_name: "agencyb"
            #     size: 100, 80
            #     size_hint: None, None
            #     pos: 460 + 27 - 16, 0
            #     color: app.color_weapon_ena if root.auto_score_status == "Auto score\non" else app.color_weapon_dis
            #     halign: "center"
                    
            # Label:
            #     id: priority_r_cap
            #     text: "P"
            #     font_size: 120
            #     font_name: "agencyb"
            #     size: 100, 100
            #     size_hint: None, None
            #     pos: 1360 - 27 - 8, 80
            #     color: app.color_right_p_ena if root.priority == +1 else app.color_right_p_dis

            # Label:
            #     id: priority_r_word
            #     text: "priority"
            #     font_size: 36
            #     font_name: "agencyb"
            #     size: 100, 100
            #     size_hint: None, None
            #     pos: 1360 + 27 - 16, 80 - 27
            #     color: app.color_warn_text_ena if root.priority == +1 else app.color_warn_text_dis
            
            # Label:
            #     text: root.auto_timer_status
            #     font_size: 32
            #     font_name: "agencyb"
            #     size: 100, 80
            #     size_hint: None, None
            #     pos: 1360 + 27 - 16, 0
            #     color: app.color_weapon_ena if root.auto_timer_status == "Auto timer\non" else app.color_weapon_dis
            #     halign: "center"
            
            # ToggleButton:
            #     id: passive_1
            #     text: "Pcard"
            #     font_size: 30
            #     font_name: "agencyb"
            #     state: root.passive_1_state
            #     color: app.color_warn_text_ena if self.state == "down" else app.color_warn_text_dis
            #     size: 100, 40
            #     size_hint: None, None
            #     pos: 460, 380
            #     on_press: app.passive_stop_card(self.state, 1)
            #     disabled: root.timer_running == 1

            #     background_color: root.color_invis
            #     background_down: ""
            #     background_normal: ""
            #     background_disabled_down: ""
            #     background_disabled_normal: ""

            #     canvas.before:
            #         Color:
            #             rgba: app.color_warn_red_dis if self.state == "normal" else app.color_warn_red_ena
            #         RoundedRectangle:
            #             pos: self.pos
            #             size: self.size
            #             radius: [{{ data["card"]["radius"] }},]

            # ToggleButton:
            #     id: passive_2
            #     text: "Pcard"
            #     font_size: 30
            #     font_name: "agencyb"
            #     state: root.passive_2_state
            #     color: app.color_warn_text_ena if self.state == "down" else app.color_warn_text_dis
            #     size: 100, 40
            #     size_hint: None, None
            #     pos: 460, 320
            #     on_press: app.passive_stop_card(self.state, 2)
            #     disabled: root.timer_running == 1

            #     background_color: root.color_invis
            #     background_down: ""
            #     background_normal: ""
            #     background_disabled_down: ""
            #     background_disabled_normal: ""

            #     canvas.before:
            #         Color:
            #             rgba: app.color_warn_yel_dis if self.state == "normal" else app.color_warn_yel_ena
            #         RoundedRectangle:
            #             pos: self.pos
            #             size: self.size
            #             radius: [{{ data["card"]["radius"] }},]

            # ToggleButton:
            #     id: passive_3
            #     text: "Pcard"
            #     font_size: 30
            #     font_name: "agencyb"
            #     state: root.passive_3_state
            #     color: app.color_warn_text_ena if self.state == "down" else app.color_warn_text_dis
            #     size: 100, 40
            #     size_hint: None, None
            #     pos: 1360, 380
            #     on_press: app.passive_stop_card(self.state, 3)
            #     disabled: root.timer_running == 1

            #     background_color: root.color_invis
            #     background_down: ""
            #     background_normal: ""
            #     background_disabled_down: ""
            #     background_disabled_normal: ""

            #     canvas.before:
            #         Color:
            #             rgba: app.color_warn_red_dis if self.state == "normal" else app.color_warn_red_ena
            #         RoundedRectangle:
            #             pos: self.pos
            #             size: self.size
            #             radius: [{{ data["card"]["radius"] }},]

            # ToggleButton:
            #     id: passive_4
            #     text: "Pcard"
            #     font_size: 30
            #     font_name: "agencyb"
            #     state: root.passive_4_state
            #     color: app.color_warn_text_ena if self.state == "down" else app.color_warn_text_dis
            #     size: 100, 40
            #     size_hint: None, None
            #     pos: 1360, 320
            #     on_press: app.passive_stop_card(self.state, 4)
            #     disabled: root.timer_running == 1

            #     background_color: root.color_invis
            #     background_down: ""
            #     background_normal: ""
            #     background_disabled_down: ""
            #     background_disabled_normal: ""

            #     canvas.before:
            #         Color:
            #             rgba: app.color_warn_yel_dis if self.state == "normal" else app.color_warn_yel_ena
            #         RoundedRectangle:
            #             pos: self.pos
            #             size: self.size
            #             radius: [{{ data["card"]["radius"] }},]

            # Label:
            #     id: record_indicator
            #     size: 32, 32
            #     size_hint: None, None
            #     pos: 1920 - 40, 480 - 40

            #     canvas:
            #         Color:
            #             rgba: app.color_rec if root.recording else root.color_invis
            #         RoundedRectangle:
            #             pos: self.pos
            #             size: self.size
            #             radius: self.size

    FloatLayout:
        BoxLayout:
            orientation: "vertical"
            size: {{ data["settings"]["category_button_width"] }}, {{ data["height"] }}
            size_hint: None, None
            pos: 0, 0

            ToggleButton:
                id: settings_system
                group: "settings"
                text: "System"
                font_size: {{ data["settings"]["category_button_font_size"] }}
                font_name: "agencyb"

            ToggleButton:
                id: settings_remote
                group: "settings"
                text: "Remote"
                font_size: {{ data["settings"]["category_button_font_size"] }}
                font_name: "agencyb"
            
            ToggleButton:
                id: settings_video
                group: "settings"
                text: "Video"
                font_size: {{ data["settings"]["category_button_font_size"] }}
                font_name: "agencyb"
                disabled: True
        
        BoxLayout:
            orientation: "vertical"
            size: {{ data["settings"]["category_button_width"] }}, {{ data["height"] }}
            size_hint: None, None
            pos: {{ data["width"] - data["settings"]["category_button_width"] }}, 0

            ToggleButton:
                id: settings_ethernet
                group: "settings"
                text: "Ethernet"
                font_size: {{ data["settings"]["category_button_font_size"] }}
                font_name: "agencyb"

            ToggleButton:
                id: settings_wifi
                group: "settings"
                text: "Wifi"
                font_size: {{ data["settings"]["category_button_font_size"] }}
                font_name: "agencyb"

            ToggleButton:
                id: settings_update
                group: "settings"
                text: "Update"
                font_size: {{ data["settings"]["category_button_font_size"] }}
                font_name: "agencyb"

        BoxLayout:
            pos: ({{ (data["width"] - data["height"]) / 2 }}, 0) if settings_system.state == "down" else ({{ data["settings"]["category_button_width"] }}, {{ data["width"] }})
            size: {{ data["height"] }}, {{ data["height"] }}

            Button:
                size: {{ data["height"] }}, {{ data["height"] }}
                size_hint: None, None
                background_normal: "assets/poweroff_button.png"
                background_down: "assets/poweroff_button.png"
                on_press: app.system_poweroff()

        BoxLayout:
            pos: ({{ (data["width"] - data["height"]) / 2 }}, 0) if settings_remote.state == "down" else ({{ data["settings"]["category_button_width"] }}, {{ data["width"] }})
            size: {{ data["height"] }}, {{ data["height"] }}

            Button:
                id: sync_remote
                size: {{ data["height"] }}, {{ data["height"] }}
                size_hint: None, None
                font_size: {{ data["settings"]["button_1_font_size"] }}
                font_name: "agencyb"
                text: "Sync new remote"
                sync_state: "no_sync"
                on_press: app.sync_new_remote(self)

        BoxLayout:
            pos: ({{ (data["width"] - data["height"]) / 2 }}, {{ data["height"] / 2 }}) if settings_ethernet.state == "down" else ({{ data["settings"]["category_button_width"] }}, {{ data["width"] }})
            size: {{ data["height"] }}, {{ data["height"] / 2 }}
            size_hint: None, None
            orientation: "vertical"       

            Label:
                text: "Wired"
                font_size: {{ data["settings"]["large_label_font_size"] }}
                font_name: "agencyb"

            Label:
                text: root.wired_ip
                font_size: {{ data["settings"]["small_label_font_size"] }}
                font_name: "agencyb"

        BoxLayout:
            pos: ({{ (data["width"] - data["height"]) / 2 }}, {{ data["height"] / 2 }}) if settings_wifi.state == "down" else ({{ data["settings"]["category_button_width"] }}, {{ data["width"] }})
            size: {{ data["height"] }}, {{ data["height"] / 2 }}
            size_hint: None, None
            orientation: "vertical"       

            Label:
                text: "Wireless"
                font_size: {{ data["settings"]["large_label_font_size"] }}
                font_name: "agencyb"

            Label:
                text: root.wireless_ip
                font_size: {{ data["settings"]["small_label_font_size"] }}
                font_name: "agencyb"
        


        BoxLayout:
            pos: ({{ (data["width"] - data["height"]) / 2 }}, 0) if settings_update.state == "down" else ({{ data["settings"]["category_button_width"] }}, {{ data["width"] }})
            size: {{ data["height"] }}, {{ data["height"] }}

            Button:
                id: update_btn
                size: {{ data["height"] }}, {{ data["height"] }}
                size_hint: None, None
                font_size: {{ data["settings"]["button_1_font_size"] }}
                font_name: "agencyb"
                text: "Check for updates"
                update_state: "no_update"
                on_press: app.updater.update(self)
